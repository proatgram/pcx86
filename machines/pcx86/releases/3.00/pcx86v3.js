(function(){/*
 https://www.pcjs.org/modules/defs.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/numio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/stdio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/webio.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/device.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/input.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/led.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/monitor.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/time.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/bus.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/memory.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/ram.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/rom.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/cpu.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/debugger.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/cpux86.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/dbgx86.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/video.js (C) 2012-2020 Jeff Parsons
 https://www.pcjs.org/modules/machine.js (C) 2012-2020 Jeff Parsons
*/
var m;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function p(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:aa(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var ba="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ca;
if("function"==typeof Object.setPrototypeOf)ca=Object.setPrototypeOf;else{var da;a:{var ea={hb:!0},fa={};try{fa.__proto__=ea;da=fa.hb;break a}catch(a){}da=!1}ca=da?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ha=ca;
function t(a,b){a.prototype=ba(b.prototype);a.prototype.constructor=a;if(ha)ha(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c]}var ia="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function ja(a){a=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,a];for(var b=0;b<a.length;++b){var c=a[b];if(c&&c.Math==Math)return c}return globalThis}var x=ja(this);function ka(a,b){if(b){var c=x;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ia(c,a,{configurable:!0,writable:!0,value:b})}}
ka("Math.trunc",function(a){return a?a:function(b){b=Number(b);if(isNaN(b)||Infinity===b||-Infinity===b||0===b)return b;var c=Math.floor(Math.abs(b));return 0>b?-c:c}});ka("Math.log2",function(a){return a?a:function(b){return Math.log(b)/Math.LN2}});
ka("String.prototype.repeat",function(a){return a?a:function(b){if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");var c=this;if(0>b||1342177279<b)throw new RangeError("Invalid count value");b|=0;for(var d="";b;)if(b&1&&(d+=c),b>>>=1)c+=c;return d}});function la(){la=function(){};x.Symbol||(x.Symbol=ma)}function na(a,b){this.s=a;ia(this,"description",{configurable:!0,writable:!0,value:b})}na.prototype.toString=function(){return this.s};
var ma=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new na("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();function oa(){la();var a=x.Symbol.iterator;a||(a=x.Symbol.iterator=x.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ia(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return pa(aa(this))}});oa=function(){}}function pa(a){oa();a={next:a};a[x.Symbol.iterator]=function(){return this};return a}
function qa(a,b){oa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}ka("Array.prototype.keys",function(a){return a?a:function(){return qa(this,function(b){return b})}});
ka("Array.prototype.fill",function(a){return a?a:function(b,c,d){var e=this.length||0;0>c&&(c=Math.max(0,e+c));if(null==d||d>e)d=e;d=Number(d);0>d&&(d=Math.max(0,e+d));for(c=Number(c||0);c<d;c++)this[c]=b;return this}});ka("Number.parseInt",function(a){return a||parseInt});ka("Array.prototype.values",function(a){return a?a:function(){return qa(this,function(b,c){return c})}});function ra(){}var sa=new ArrayBuffer(2);(new DataView(sa)).setUint16(0,256,!0);new Uint16Array(sa);
var A={wb:0xffffffffffff,NONE:0,zc:0,Aa:0x800000000000},C={};C.Defs=ra;function ta(){}t(ta,ra);
function ua(a,b){if(a){b||(b=10);var c,d=0<a.indexOf(",");d&&(a=a.replace(/,/g,""));var e=c=a.charAt(0);"#"==c?(b=8,c=""):"$"==c&&(b=16,c="");e!=c?a=a.substr(1):(e=c=a.substr(0,2),"0b"==c&&d||"^B"==c?(b=2,c=""):"0o"==c||"^O"==c?(b=8,c=""):"^D"==c?(b=10,c=""):"0x"==c&&(b=16,c=""),e!=c&&(a=a.substr(2)));e=c=a.slice(-1);"Y"==c||"y"==c?(b=2,c=""):"."==c?(b=10,c=""):"H"==c||"h"==c?(b=16,c=""):"K"==c?c="000":"M"==c?c="000000":"G"==c&&(c="000000000");e!=c&&(a=a.slice(0,-1)+c);var g;e=0;10>=b&&(c=a.match(/(-?[0-9]+)B([0-9]*)$/))&&
(a=c[1],e=35-((c[2]||35)&255));if((b&&10!=b?16==b?null!==a.match(/^-?[0-9a-f]+$/i):8==b?null!==a.match(/^-?[0-7]+$/):2==b&&null!==a.match(/^-?[01]+$/):null!==a.match(/^[+-]?[0-9]+$/))&&!isNaN(g=parseInt(a,b))){e&&(0>g&&(g+=Math.pow(2,36)),g=0<e?g*Math.pow(2,e):Math.trunc(g/Math.pow(2,-e)));var f=g}}return f}
function D(a,b,c,d,e){d=void 0===d?0:d;var g=void 0===g?0:g;var f="",k="",h=-1;c||(c=a.Y||10);d&&(h=Math.ceil(d/Math.log2(c)));if(void 0==e)switch(c){case 8:e="0o";break;case 16:e="0x";break;case 10:k=".";default:e=""}isNaN(b)||"number"!=typeof b?(b=void 0,e=k=""):(0>b&&-1<b&&(b=-1),d&&(0>b&&(b+=Math.pow(2,d)),b>=Math.pow(2,d)&&(h=Math.ceil(Math.log(b)/Math.log(c)))));for(a=g||-1;h--;){a||(f=","+f,a=g);if(void 0==b){if(f="?"+f,0>h)break}else if(d=b%c,b=Math.trunc(b/c),d+=0<=d&&9>=d?48:55,f=String.fromCharCode(d)+
f,!b&&0>h)break;a--}return e+f+k}function va(a,b){var c=a/E|0,d=b/E|0;return(a&b)==(b|0)&&(c&d)==d}function wa(a){for(var b=0,c=0,d=[];b<a.length;){for(var e=a[b],g=b+1;g<a.length&&a[g]===e;)g++;d[c++]=g-b;d[c++]=e;b=g}return d.length>=a.length?a:d}var E=Math.pow(2,32);C.NumIO=ta;function F(){this.ya={};for(var a=0;22>a;a++)this.ya["ACDFHGMNSTWYbdfjcsoXx%"[a]]=null}t(F,ta);function xa(a,b,c){a.ya[b]||(a.ya[b]=c)}m=F.prototype;m.flush=function(){var a=ya;ya="";this.ta(a)};
function za(a){var b=a,c=a.lastIndexOf("/");0<=c&&(b=a.substr(c+1));c=b.indexOf("&");0<c&&(b=b.substr(0,c));c=b.lastIndexOf(".");0<c&&(b=b.substring(0,c));return b}
m.Nd=function(a){for(var b=[],c=0;c<arguments.length;++c)b[c]=arguments[c];void 0===b[0]?b=new Date(Date.now()):"string"===typeof b[0]?(c=b[0],0>c.indexOf(":")?c+=" "+(b[1]||"00:00:00 UTC"):c.match(/^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9] [0-9][0-9]:[0-9][0-9]:[0-9][0-9]$/)&&(b[1]||(c+=" UTC")),b=new Date(c)):b=void 0===b[1]?new Date(b[0]):new Date(Date.UTC.apply(Date,p(b)));return b};
m.ta=function(a,b){var c=a.lastIndexOf("\n");b?0<=c&&(b=Date.now(),Aa||(Aa=b),a=((b-Aa)/1E3).toFixed(3)+": "+a):(0<=c&&(console.log(ya+a.substr(0,c)),ya="",a=a.substr(c+1)),Aa=null);ya+=a;return a.length};function G(a,b,c){a.ta(b+"\n",c)}m.v=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return this.ta(this.m.apply(this,[a].concat(p(c))))};
m.m=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];if(!c||!c.length)return a;d="";var e=a.split(/%([-+ 0#]*)([0-9]*|\*)(\.[0-9]+|)([bwhlL]?)([A-Za-z%])/),g=0,f;for(f=0;f<e.length-6;f+=6){d+=e[f];var k=e[f+5];if(void 0===this.ya[k])d+="%"+e[f+1]+e[f+2]+e[f+3]+e[f+4]+k;else{if(g<c.length){var h=c[g];"%"!=k&&g++}else h=c[c.length-1];var q=e[f+1],l=0<=q.indexOf("#"),v=0<=q.indexOf("0"),n=e[f+2];"*"==n?(n=h,h=g<c.length?c[g++]:c[c.length-1]):n=+n||0;var r=e[f+3];r=r?+r.substr(1):
-1;var w=e[f+4],u=null,z=0,B="";var y=0<="ACDFHGMNSTWY".indexOf(k)&&"object"!=typeof h?this.Nd(h):h;switch(k){case "C":h=l?"#":"";d+=isNaN(y.getTime())?void 0:this.m(this.m("%%%sW, %%%sF %%%sD, %%%sY",h),y);continue;case "D":h=l?y.getUTCDate():y.getDate();k="d";break;case "A":case "G":case "H":h=l?y.getUTCHours():y.getHours();"A"==k?(h=12>h?"am":"pm",k="s"):("G"==k&&(h=h?12<h?h-12:h:12),k="d");break;case "F":case "M":h=l?y.getUTCMonth():y.getMonth();"F"==k?(h=Ba[h],k="s"):(h++,k="d");break;case "N":h=
l?y.getUTCMinutes():y.getMinutes();k="d";break;case "S":h=l?y.getUTCSeconds():y.getSeconds();k="d";break;case "T":h=l?"#":"";d+=isNaN(y.getTime())?void 0:this.m(this.m("%%%sY-%%%s02M-%%%s02D %%%s02H:%%%s02N:%%%s02S",h),y);continue;case "W":h=Ca[l?y.getUTCDay():y.getDay()];k="s";break;case "Y":h=l?y.getUTCFullYear():y.getFullYear(),0<r&&(h%=Math.pow(10,r),r=-1),k="d"}switch(k){case "b":d+=h?"true":"false";break;case "d":h=Math.trunc(h),0<=r&&(v=!0,n<r&&(n=r),r=-1);case "f":h=+h;y=h+"";0<=r&&(y=h.toFixed(r));
y.length<n&&(v?(0>h&&(n--,y=y.substr(1)),y=("0".repeat(n)+y).slice(-n),0>h&&(y="-"+y)):y=(" ".repeat(n)+y).slice(-n));d+=y;break;case "j":d+=JSON.stringify(h,null,n||void 0);break;case "c":h="string"==typeof h?h[0]:String.fromCharCode(h);case "s":if(void 0!=h)for("string"!=typeof h&&(h=h.toString()),0<=r&&(h=h.substr(0,r));h.length<n;)h=0<=q.indexOf("-")?h+" ":" "+h;d+=h;break;case "o":z=8,l&&(B="0");case "X":u=Da;case "x":y="";z||(z=16);!B&&l&&(B="0x");u||(u=Ea);h=Math.trunc(h);0<=r&&(v=!0,n<r&&
(n=r));v&&!n&&("b"==w?n=2:"h"==w||"w"==w?n=4:"l"==w?n=8:(n=Math.abs(h),n=255>=n?2:65535>=n?4:4294967295>=n?8:9),n+=B.length);n-=B.length;do l=h&z-1,h>>>=16==z?4:3,v||!y||l||h?y=u[l]+y:(B&&(y=B+y,B=""),0<n&&(y=" "+y));while(0<--n||h);d+=B+y;break;case "%":d+="%";break;default:this.ya[k]?d+=this.ya[k](k,q,n,r,h):d+="(unimplemented sprintf type: %"+k+")"}}}return d+=e[f]};
var ya="",Aa=null,Ea="0123456789abcdef",Da="0123456789ABCDEF",Ca="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ba="January February March April May June July August September October November December".split(" ");C.StdIO=F;function H(a){F.call(this);this.O={};this.aa=0;this.s=this;a&&(this.s.aa=0,this.s.oa=[],this.s.ga=0,this.s.Ka={},this.s.Ja=!1)}var Fa;t(H,F);m=H.prototype;
m.ua=function(a,b){var c=this,d=this;switch(a){case Ga.uc:b.onclick=function(){var e=c.na(Ga.Oa,!0);e&&(e.value="")};break;case Ga.Oa:Ha(b),b.addEventListener("keydown",function(e){Ia(d,e,!0)}),b.addEventListener("keypress",function(e){Ia(d,e)})}};function Ja(a,b){var c=Ka.Bb;a.s.Ka[c]||(a.s.Ka[c]=[]);a.s.Ka[c].push(b)}function Ha(a){a.setAttribute("autocapitalize","off");a.setAttribute("autocomplete","off");a.setAttribute("autocorrect","off");a.setAttribute("spellcheck","false");a.value=""}
m.error=function(a,b){b=this.m.apply(this,[a].concat(p(b)));var c="%s";a=!1;"boolean"==typeof c&&(a=c,c=b.shift());if(b=this.m.apply(this,[c].concat(p(b))))G(this,b),a||alert(b)};m.na=function(a){return this.O[a]};function La(a,b,c){if(a){do{for(var d=0;d<Ma.length;d++){var e=Ma[d];if(c){if(e+=c,b+e in a)return e}else if(e=e?e+b[0].toUpperCase():b[0],e+=b.substr(1),e in a)return e}if(0>b.indexOf("screen"))break;b=b.replace("screen","Screen")}while(1)}return null}
function Na(a,b){return a.h.bindings&&a.h.bindings[b]}function Oa(a){if(a=a.O[Pa])var b=a.textContent;return b}function Qa(a,b,c){a=+a||0;a<b&&(a=b);a>c&&(a=c);return a}function I(a,b,c,d){a=a.h[b];void 0===a?a=c:(d&&void 0!==d[a]&&(a=d[a]),d=typeof c,typeof a!=d&&("boolean"==d?a=!!a:"number"==typeof c&&(a=+a)));return a}
function Ra(a,b){var c=0,d=null,e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");e.onreadystatechange=function(){4===e.readyState&&(d=e.responseText,200==e.status||!e.status&&d.length&&"file:"==(window?window.location.protocol:"file:")||(c=e.status||-1));b(a,d,e.readyState,c)};e.open("GET",a,!0);e.send()}
function Sa(){var a,b=Fa;if(!b){b={};if(window){a||(a=window.location.search.substr(1));for(var c,d=/\+/g,e=/([^&=]+)=?([^&]*)/g;c=e.exec(a);)b[decodeURIComponent(c[1].replace(d," ")).trim()]=decodeURIComponent(c[2].replace(d," ")).trim()}Fa=b}return b}function Ta(a){if(void 0===J.cb){var b=!1;if(window)try{window.localStorage.setItem(J.Da,J.Da),b=window.localStorage.getItem(J.Da)==J.Da,window.localStorage.removeItem(J.Da)}catch(c){G(a,c.message),b=!1}J.cb=b}return!!J.cb}
function Ua(a,b){b=void 0===b?0:b;1<b&&b%2&&b--;b=b||a.aa;return-1==(b|1)||va(a.s.aa,b)?!0:!1}function Va(a){if(window){var b=window.navigator.userAgent;return"iOS"==a&&(!!b.match(/(iPod|iPhone|iPad)/)||"MacIntel"===window.navigator.platform&&1<window.navigator.maxTouchPoints)||"MSIE"==a&&!!b.match(/(MSIE|Trident)/)||0<=b.indexOf(a)}return!1}function Wa(a){var b=null;if(Ta(a)){var c;if(window)try{(c=window.localStorage.getItem(a.I))&&(b=JSON.parse(c))}catch(d){G(a,d.message)}}return b}
function Ia(a,b,c){b=b||window.event;var d=b.which||b.keyCode;if(d){var e=a.s,g=b.target;if(c){a=!1;var f;c=g.value;var k=c.lastIndexOf("\n");d==K.yb&&g.selectionStart<=k+1&&(a=!0);d==K.vd?(a=!0,0<e.ga&&(f=e.oa[--e.ga])):d==K.Bc&&(a=!0,e.ga<e.oa.length&&(f=e.oa[++e.ga]||""));a&&b.preventDefault();void 0!=f&&(g.value=c.substr(0,k+1)+f)}else d=String.fromCharCode(d),f=g.value,c=f.lastIndexOf("\n"),g.selectionStart<=c&&g.setSelectionRange(f.length,f.length),b.stopPropagation(),"@"==d&&0<e.ga&&c+1==f.length&&
(g.value+=e.oa[--e.ga],d="\r"),"\r"==d&&(b.preventDefault(),f=g.value+="\n",g.blur(),g.focus(),(b=Xa(a,f.slice(f.lastIndexOf("\n",f.length-2)+1,-1)||""))&&G(a,b.replace(/\n$/,""),!1))}}function Ya(a){if(window){var b=window.onresize;window.onresize="function"!==typeof b?a:function(){b&&b();a()}}}function Za(a){return"true"==a||"on"==a?!0:"false"==a||"off"==a?!1:void 0}
function $a(a,b){if(void 0!=b){var c=a.s;try{if(b=b.trim())c.ga<c.oa.length&&b==c.oa[c.ga]?c.ga++:(c.oa.push(b),c.ga=c.oa.length);var d=b.split(" "),e=d[0],g=a.s.Ka[Ka.Bb];switch(e[0]){case "m":if("?"==e[1]){var f="";ab.forEach(function(v){f+=v+"\n"});f&&(f="message commands:\n"+f);break}f="";var k=void 0;e=d[d.length-1].toLowerCase();var h=Za(e);void 0!=h&&d.pop();1>=d.length&&(void 0!=h&&(k=h,h=void 0),d[1]="all");"all"==d[1]&&(d=Object.keys(L));for(g=1;g<d.length;g++){e=d[g];var q=L[e];if(!q){f+=
"unrecognized message: "+e+"\n";break}void 0!=h&&bb(a,q,h);if(void 0==k||k==Ua(a,q))f+=a.m("%8s: %b\n",e,Ua(a,q))}Ua(a,A.Aa)&&(f+="all messages will be buffered until buffer is turned off\n");f||(f="no messages\n");break;case "?":f="",cb.forEach(function(v){f+=v+"\n"}),f&&(f="default commands:\n"+f);default:if(d.unshift(b),g)for(a=0;a<g.length;a++){var l=g[a](d);if(void 0!=l){f=f?f+l:l;break}}}}catch(v){f="error: "+v.message+"\n"}}return f}
function Xa(a,b){b=void 0===b?"?":b;if(b){var c="";b=b.split(/(?:\n|;\s*)/);for(var d=0;d<b.length;d++)c+=$a(a,b[d])}return c}m.ta=function(a,b){void 0==b&&(b=Ua(this,A.Aa));if(!b){var c=this.na(Ga.Oa,!0);if(c)return c.value.substr(-a.length)!=a&&(c.value+=a,8192<c.value.length&&(c.value=c.value.substr(c.value.length-4096)),c.scrollTop=c.scrollHeight,Va("iOS")||c.setSelectionRange(c.value.length,c.value.length)),a.length}return F.prototype.ta.call(this,a,b)};
m.v=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];d=0;"number"==typeof a&&(d=a,a=c.shift());return Ua(this,d)?F.prototype.v.call.apply(F.prototype.v,[this,a].concat(p(c))):0};function db(a,b){if(Ta(a)){b=JSON.stringify(b);try{window.localStorage.setItem(a.I,b)}catch(c){G(a,c.message)}}}function eb(a,b,c){(a=a.O[b])&&a.textContent!=c&&(a.textContent=c)}
function bb(a,b,c){var d=!1;c?(c=a.s.aa,a.s.aa=(c|b)+(c/E|0|b/E|0)*E):(d=va(a.s.aa,A.Aa)&&va(b,A.Aa),c=a.s.aa,a.s.aa=(c&~b)+((c/E|0)&~(b/E|0))*E);d&&a.flush()}
var Ga={uc:"clear",Oa:"print"},cb=["\u2191 \u2193\t\trecall commands","@\t\trepeat last command","m?\t\tmessage commands"],ab=["m\t\tdisplay all messages","m on\t\tdisplay all active messages","m off\t\tdisplay all inactive messages","m all [on|off]\tturn all messages on or off","m ... [on|off]\tturn selected messages on or off"],L={all:A.wb,buffer:A.Aa},Ka={Bb:"command"},fb={Db:13,bb:65,xb:66,zb:67,Eb:68,E:69,Gb:70,Ib:71,Jb:72,Kb:73,Lb:74,Mb:75,Ob:76,Sb:77,Tb:78,Ub:79,Vb:80,Q:81,Xb:82,Zb:83,ac:84,
bc:85,cc:86,ec:87,fc:88,gc:89,gb:90,hb:97,hf:98,jf:99,d:100,e:101,nf:102,pf:103,rf:104,sf:105,tf:106,k:107,uf:108,vf:109,n:110,wf:111,p:112,q:113,r:114,xf:115,t:116,Af:117,Bf:118,Cf:119,x:120,y:121,z:122},K={yb:8,od:9,Qc:10,Db:13,kd:16,xc:17,rc:18,Xe:19,eb:20,Zd:27,md:32,$e:33,Ze:34,Yd:35,te:36,Qb:37,vd:38,fb:39,qe:39,Bc:40,ne:44,af:44,ue:45,Xd:46,pe:46,se:47,ZERO:48,ONE:49,td:50,pd:51,Mc:52,Lc:53,ld:54,jd:55,Cc:56,Vc:57,Jc:59,Ic:61,bb:65,xb:66,zb:67,Eb:68,E:69,Gb:70,Ib:71,Jb:72,Kb:73,Lb:74,Mb:75,
Ob:76,Sb:77,Tb:78,Ub:79,Vb:80,Q:81,Xb:82,Zb:83,ac:84,bc:85,cc:86,ec:87,fc:88,gc:89,gb:90,Ab:91,oe:91,me:92,df:93,re:93,ye:96,Pe:96,le:96,ze:97,Ne:97,Ae:98,Me:98,Be:99,Se:99,Ce:100,Qe:100,De:101,Je:101,Ee:102,Ue:102,Fe:103,Oe:103,Ge:104,We:104,He:105,Te:105,Re:106,Ie:107,Ve:109,Ke:110,Le:111,$d:112,de:113,ee:114,fe:115,ge:116,he:117,ie:118,je:119,ke:120,ae:121,be:122,ce:123,Wc:144,fd:145,Hc:173,gd:186,Dc:187,Vd:188,yc:189,Ye:190,ff:191,Td:192,ve:219,Ud:220,cf:221,bf:222,Gc:224,we:901,dc:1E3},gb={},
hb=(gb[K.Jc]=K.gd,gb[K.Ic]=K.Dc,gb[K.Hc]=K.yc,gb[K.Gc]=K.Ab,gb),ib={Qb:1,fb:2,xe:3},M={},jb=(M[K.yb]="\b",M[K.od]="\t",M[K.Qc]="\n",M[K.Db]="\r",M[K.md]=" ",M[K.ZERO]="0",M[K.ONE]="1",M[K.td]="2",M[K.pd]="3",M[K.Mc]="4",M[K.Lc]="5",M[K.ld]="6",M[K.jd]="7",M[K.Cc]="8",M[K.Vc]="9",M[K.bb]="A",M[K.xb]="B",M[K.zb]="C",M[K.Eb]="D",M[K.E]="E",M[K.Gb]="F",M[K.Ib]="G",M[K.Jb]="H",M[K.Kb]="I",M[K.Lb]="J",M[K.Mb]="K",M[K.Ob]="L",M[K.Sb]="M",M[K.Tb]="N",M[K.Ub]="O",M[K.Vb]="P",M[K.Q]="Q",M[K.Xb]="R",M[K.Zb]=
"S",M[K.ac]="T",M[K.bc]="U",M[K.cc]="V",M[K.ec]="W",M[K.fc]="X",M[K.gc]="Y",M[K.gb]="Z",M[K.Qb]="Left",M[K.fb]="Right",M),Ma=["","moz","ms","webkit"],kb={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",
crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",
forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",
lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",
seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},J={cb:void 0,Da:"PCjs.localStorage"};C.WebIO=H;
function N(a,b,c,d){a=void 0===a?"default":a;b=void 0===b?a:b;c=void 0===c?{}:c;d=void 0===d?[]:d;H.call(this,a==b);this.I=a;this.R=b;O[this.I]||(O[this.I]={});O[this.I][this.R]&&this.v("warning: machine configuration contains multiple '%s' devices\n",this.R);O[this.I][this.R]=this;this.id=this.I==this.R?this.I:this.I+"."+this.R;lb.push(this);this.s=mb(this,this.I);this.ready=!0;nb(this,c,d);this.La={};this.Rb=[]}t(N,H);m=N.prototype;m.ib=function(){};m.jb=function(){};
function nb(a,b,c){c=b.overrides||c;if(c.length){var d=Sa();for(k in d)if(0<=c.indexOf(k)){var e=d[k],g=ua(e,10);void 0==g&&("true"==e?g=!0:"false"==e?g=!1:(g=e,e='"'+e+'"'));b[k]=g;G(a,"overriding "+a.R+" property '"+k+"' with "+e)}}a.h=b;c=b.bindings;c=void 0===c?{}:c;if("undefined"!=typeof document){a.h.O||(a.h.O=c);(d=Array.isArray(c))?0>c.indexOf("container")&&c.push("container"):c.container||(c.container=a.R);for(var f in c){e=c[f];if(d)f=e;else if(e.match(/^[0-9]+$/)){var k=+e;a.O[f]=[];do{e=
f+k++;e=document.getElementById(e);if(!e)break;a.O[f].push(e)}while(1);continue}if(k=document.getElementById(e))a.O[f]=k,a.ua(f,k)}}b=void 0===b?{}:b;a.version=3;if(a.version){f="";var h;a.I!=a.R&&(h=mb(a,a.I).version)&&h!=a.version&&(f="Machine");f||(h=b.version)&&h>a.version&&(f="Config");f&&(h=a.m("%s Device version (%3.2f) incompatible with %s version (%3.2f)",b.kf,a.version,f,h),a.error("%s\n\nClearing your browser's cache may resolve the issue.",h))}}
function ob(a,b){var c;try{var d=O[a.I];if(d)for(c in d){var e=d[c];if(e.R!=e.I&&!b(e))return!1}return!0}catch(g){a.v("error while enumerating device '%s': %s\n",c,g.message)}return!1}m.na=function(a,b){b=void 0===b?!1:b;if(a){var c=H.prototype.na.call(this,a,b);if(void 0===c&&b){b=O[this.I];for(var d in b)if(c=b[d].O[a])break;c||(c=null);this.O[a]=c}}return c};
function mb(a,b,c){var d=b,e=a.I,g=e.indexOf(".");0<g&&(e=e.substr(0,g),b=b.substr(g+1));b=(g=O[e])&&g[b]||null;if(!b){for(g=0;g<lb.length;g++)if(lb[g].id===d){b=lb[g];break}if(!b&&(void 0===c||c))throw Error(a.m('no "%s" device',d));}return b}function P(a,b,c){var d=null,e=O[a.I];if(e)for(var g in e)if(e[g].h["class"]==b){if(d){d=null;break}d=e[g]}if(!d&&(void 0===c||c))throw Error(a.m("no %s device",b));return d}function pb(a,b){var c=mb(a,a.I);return c&&c.h&&c.h[b]||a.h[b]}
function qb(a,b){return(a=a.La[b])&&a.get()}function rb(a){return a==a.s&&a.ready?ob(a,function(b){return rb(b)}):a.ready}function sb(a,b){b=void 0===b?a.ready:b;a.ready=b;if(rb(a)){for(;b=a.Rb.pop();)b();a!=a.s&&sb(a.s)}}function tb(a,b){if(rb(a))return b(),!0;a.Rb.push(b);return!1}m.mc=function(){};
m.v=function(a,b){for(var c=[],d=1;d<arguments.length;++d)c[d-1]=arguments[d];return"number"==typeof a&&Ua(this,a)&&(void 0===this.X&&(this.X=P(this,"Debugger",!1)),this.X&&this.X.mc(a),this.s.aa&A.vb&&(void 0===this.M&&(this.M=P(this,"CPU")),this.M))?(a=c.shift(),H.prototype.v.call(this,"%#06x: %s.%s\n",this.M.ob,this.R,this.m.apply(this,[a].concat(p(c))).trim())):H.prototype.v.call.apply(H.prototype.v,[this,a].concat(p(c)))};function ub(a,b){(a=O[a.I])&&delete a[b]}
function vb(a,b,c){(a=a.La[b])&&a.set&&a.set(c)}"undefined"!=typeof window&&(window.PCjs||(window.PCjs={}),window.PCjs.Machines||(window.PCjs.Machines={}),window.PCjs.Components||(window.PCjs.Components=[]));var O="undefined"!=typeof window?window.PCjs.Machines:{},lb="undefined"!=typeof window?window.PCjs.Components:[];A.vb=1;A.sc=2;A.Fc=4;A.Rc=8;A.$c=16;A.tc=32;A.Pc=64;A.hd=128;A.Sc=256;A.wc=512;A.Tc=1024;A.INT=2048;A.sd=4096;A.xd=8192;A.Ma=16384;A.ed=32768;A.Ac=65536;A.Kc=131072;A.Qa=262144;
A.qd=524288;A.Fb=1048576;A.ja=2097152;A.Nb=4194304;A.Uc=8388608;A.rd=16777216;A.Oc=33554432;A.Ra=67108864;A.Ec=134217728;A.Nc=268435456;A.Wd=4294967296;L.addr=A.vb;L.bus=A.sc;L.fault=A.Fc;L.memory=A.Rc;L.ports=A.$c;L.chips=A.tc;L.kbd=A.Pc;L.serial=A.hd;L.misc=A.Sc;L.cpu=A.wc;L.mmu=A.Tc;L["int"]=A.INT;L.trap=A.sd;L.video=A.xd;L.monitor=A.Ma;L.screen=A.ed;L.disk=A.Ac;L.file=A.Kc;L.time=A.Qa;L.timer=A.qd;L.event=A.Fb;L.input=A.ja;L.key=A.Nb;L.mouse=A.Uc;L.touch=A.rd;L.info=A.Oc;L.warn=A.Ra;L.error=A.Ec;
L.halt=A.Nc;C.Device=N;
function wb(a,b,c){N.call(this,a,b,c);this.aa=A.ja;this.U=this.H=null;this.time=P(this,"Time");this.s=P(this,"Machine");this.$=I(this,"drag",!1);this.S=I(this,"scroll",!1);this.Z=I(this,"hexagonal",!1);this.g=I(this,"releaseDelay",0,void 0);this.i=!1;a=this.h.map;this.b=this.f=null;if(a)if(a.length)this.b=a;else{this.f={};b=Object.keys(a);for(var d=0;d<b.length;d++){var e=[],g=b[d],f=a[g];"string"==typeof f?f=[f]:void 0==f.length&&(e=f.grid,f=f.keys,"string"==typeof f&&(f=[f]));this.f[g]={keys:f,
qf:e,state:0}}}this.K=[];this.L=[];this.l=!1;this.c=this.o=null;(a=this.O[xb])&&yb(this,a,this.na(c.focusBinding,!0),this.h.location);this.ha()}t(wb,N);function zb(a,b){a.H=b}function Ab(a,b,c){for(var d=0;d<a.K.length;d++){var e=a.K[d];e.id===b&&e.Ua(b,c)}}
function yb(a,b,c,d){d=void 0===d?[]:d;if(d.length||a.b||a.f){var e={};e.Rd=d[0]||0;e.Sd=d[1]||0;e.Fa=d[2]||b.clientWidth;e.Sa=d[3]||b.clientHeight;e.Va=d[4]||1;e.$a=d[5]||1;e.Fd=d[6]||b.naturalWidth||e.Fa;e.Hd=d[7]||b.naturalHeight||e.Sa;e.pc=d[8]||0;e.qc=d[9]||0;e.Ed=d[10]||0;e.Gd=d[11]||0;a.b?(e.Xa=a.b.length,e.Ga=a.b[0].length):(e.Ga=e.Va,e.Xa=e.$a,e.Va=e.$a=0);e.jc=e.Fa/(e.Ga+e.Ga*e.Va)|0;e.kc=e.Sa/(e.Xa+e.Xa*e.$a)|0;e.Dd=e.jc*e.Va|0;e.lc=e.kc*e.$a|0;e.Ia=e.ab=-1;Bb(a,b,e);Cb(a,b,e);a.time&&
a.g&&(a.T=Db(a.time,"timerInputRelease",function(){0>e.Ia&&0>e.ab&&Eb(a,-1,-1)}))}if(a.b||a.f)a.time&&a.g&&(a.ba=Db(a.time,"timerKeyRelease",function(){Fb(a)})),a.j=0,a.w="",a.u=[],d=b,c&&(d=c,a.c||"BUTTON"!=c.nodeName||(d=document,a.c=c,Gb(a,b),a.o=b)),Gb(a,d),a.c||(a.c=d)}function Hb(a){a.g?Ib(a.time,a.ba,a.g):Fb(a)}
function Gb(a,b){function c(e,g,f){var k=document.activeElement;a.v(A.Nb+A.Fb,"%s.onKey%s(%d): %5.2f (%s)\n",k.id||k.nodeName,e,g,Date.now()/1E3%60,void 0!=f?f?"used":"unused":"ignored")}function d(e,g){e=document.activeElement;return a.c&&e!=a.c&&e!=a.o?null:g||window.event}b.addEventListener("keydown",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=Jb(a,g,!0,e);c("Down",g,f);f&&e.preventDefault()}});b.addEventListener("keypress",function(e){if(e=d(this,e)){var g=e.which||e.charCode,f=Jb(a,
g);c("Press",g,f);f&&e.preventDefault()}});b.addEventListener("keyup",function(e){if(e=d(this,e)){var g=e.which||e.keyCode,f=Jb(a,g,!1,e);c("Up",g);f&&e.preventDefault();"TEXTAREA"==b.nodeName&&(b.value="")}})}
function Bb(a,b,c){b.addEventListener("mousedown",function(d){if(!a.i){var e=a.l?a.o:a.c;if(e){var g=window.scrollX,f=window.scrollY;e.focus();window.scrollTo(g,f)}d.button||Q(a,b,Kb,d,c)}});b.addEventListener("mousemove",function(d){a.i||Q(a,b,Lb,d,c)});b.addEventListener("mouseup",function(d){a.i||d.button||Q(a,b,Mb,d,c)});b.addEventListener("mouseout",function(d){a.i||(0>c.Ia?Q(a,b,Lb,d,c):Q(a,b,Mb,d,c))})}
function Cb(a,b,c){b.addEventListener("touchstart",function(d){a.S&&(a.i=!0);Q(a,b,Kb,d,c)});b.addEventListener("touchmove",function(d){Q(a,b,Lb,d,c)});b.addEventListener("touchend",function(d){Q(a,b,Mb,d,c)})}
function Jb(a,b,c,d){if(void 0!=c){var e=hb[b]||b;var g=jb[b];var f=Nb[e];d=d&&d.location==ib.fb;f&Ob&&d&&(f>>=1);f&&(f&Pb&&(c=!(a.a&f)),a.a=c?a.a|f:a.a&~f,Ab(a,e,c))}else g=String.fromCharCode(b).toUpperCase(),b>=fb.bb&&b<=fb.gb?a.a&(Qb|Rb)||(a.a|=Rb,Ab(a,K.eb,!0)):b>=fb.hb&&b<=fb.z&&a.a&Rb&&(a.a&=~Rb,Ab(a,K.eb,!1));if(a.b){if(void 0!=c)return!1;for(e=0;e<a.b.length;e++)for(f=a.b[e],d=0;d<f.length;d++)if(0<=f[d].split("|").indexOf(g))return a.j?16>a.u.length&&a.u.push(b):(a.j=1,a.w=g,Eb(a,d,e),Ab(a,
g,!0),Hb(a)),!0}if(a.f){if(void 0==c)return!0;b=Object.keys(a.f);for(e=0;e<b.length;e++)if(f=b[e],0<=a.f[f].keys.indexOf(g))return Ab(a,f,c),a.f[f].state=c?1:0,!0}return!1}function Fb(a){1==a.j?(a.j++,Ab(a,a.w,!1),a.w="",Eb(a,-1,-1),Hb(a)):(a.j=0,a.u.length&&Jb(a,a.u.shift()))}wb.prototype.ha=function(){this.a=0;this.N=this.V=-1};
function Q(a,b,c,d,e){var g=-1,f=-1,k=!1,h=-1,q=-1;if(c<Mb){d=d||window.event;d.targetTouches&&d.targetTouches.length?(h=d.targetTouches[0].clientX,q=d.targetTouches[0].clientY,k=1<d.targetTouches.length):(h=d.clientX,q=d.clientY);var l=d.target.getBoundingClientRect();h-=l.left;q-=l.top;h=e.Fd/b.offsetWidth*h|0;q=e.Hd/b.offsetHeight*q|0;var v=h-e.Rd;var n=q-e.Sd;var r=l=!1;var w=h>=e.pc&&h<e.pc+e.Ed&&q>=e.qc&&q<e.qc+e.Gd;if(0<=v&&v<e.Fa&&0<=n+e.lc||w)if(k||a.S||d.preventDefault(),0<=v&&v<e.Fa&&0<=
n&&n<e.Sa){r=!0;d=e.Fa/e.Ga|0;var u=e.Sa/e.Xa|0,z=v/d|0,B=n/u|0;!a.Z||B&1||(v-=d>>1,z=v/d|0,z==e.Ga-1&&(v=-1));u=B*u+(e.lc>>1);v-=z*d+(e.Dd>>1);n-=u;0<=v&&v<e.jc&&0<=n&&n<e.kc&&(g=z,f=B,l=!0)}}v=v||0;n=n||0;d=b.offsetWidth;b=b.offsetHeight;if(c==Kb||c==Mb)for(z=0;z<a.L.length;z++)B=a.L[z],c==Mb?B.Ua(B.id,!1):(u=n/(b/B.mf|0)|0,(v/(d/B.lf|0)|0)==B.Df&&u==B.Ef&&B.Ua(B.id,!0));if(!k)if(c==Kb)e.Ia=h,e.ab=q,r?(Eb(a,g,f),l&&a.g&&Ib(a.time,a.T,a.g,!0)):w&&a.s.da();else if(c==Lb)0<=e.Ia&&0<=e.ab&&a.$?Eb(a,
g,f):a.H&&a.H(g,f);else if(c==Mb){if(c=a.g)c=a.time,g=a.T,c=c.a&&0<g&&g<=c.b.length?0<=c.b[g-1].ca:!1;c||Eb(a,-1,-1);e.Ia=e.ab=-1}else G(a,"unrecognized action: "+c)}function Sb(a){var b=a.l?a.o:a.c;b&&rb(a.s)&&(a.v(A.ja,'setFocus("%s")\n',b.id||b.nodeName),b.focus(),b.scrollIntoView())}function Eb(a,b,c){if(b!=a.N||c!=a.V)a.N=b,a.V=c,a.U&&a.U(b,c)}var Kb=1,Lb=2,Mb=3,xb="surface",Qb=3,Ob=170,Rb=512,Pb=3584,R={},Nb=(R[K.kd]=2,R[K.xc]=8,R[K.rc]=32,R[K.Ab]=128,R[K.eb]=Rb,R[K.Wc]=1024,R[K.fd]=2048,R);
C.Input=wb;
function Tb(a,b,c){N.call(this,a,b,c,["color","backgroundColor"]);a=this.O[Ub];if(!a)throw Error("LED "+this.h.O[Ub]+" binding for '"+Ub+"' missing");b=document.createElement("canvas");if(!b||!b.getContext)throw a.innerHTML="LED device requires HTML5 canvas support",Error("LED device requires HTML5 canvas support");this.xa=Na(this,Ub)+".canvas";b.setAttribute("id",this.xa);this.type=Qa(I(this,"type",Vb,Wb),Xb,Yb);this.f=Zb[this.type][0];this.l=Zb[this.type][1];this.width=I(this,"width",this.f,void 0);
this.height=I(this,"height",this.l,void 0);this.g=I(this,"cols",1,void 0);this.H=this.g+I(this,"colsExtra",0,void 0);this.T=I(this,"rows",1,void 0);this.K=this.T+I(this,"rowsExtra",0,void 0);this.$=this.width*this.g;this.U=this.height*this.T;this.j=$b("black",0);this.c=ac(this.h.color)||this.j;this.ma=$b(this.c,1,.25);this.ka=$b(this.c,1,2);this.i=ac(this.h.backgroundColor);this.ra=I(this,"fixed",!1);this.ra||(b.style.width="100%",b.style.height="auto");this.ia=I(this,"hexagonal",!1);this.sa=I(this,
"highlight",!0);this.S=I(this,"persistent",this.type<Yb);b.setAttribute("width",this.$.toString());b.setAttribute("height",this.U.toString());b.style.backgroundColor=this.j;a.appendChild(b);this.ba=b.getContext("2d");if(this.o=document.createElement("canvas"))this.o.width=this.Z=this.f*this.g,this.o.height=this.u=this.l*this.T,this.a=this.o.getContext("2d");this.Na=(this.K+1)*this.H*4;this.b=Array(this.Na);this.Pa=this.g<this.H?4*(this.H-this.g):0;this.L=this.N=!1;this.w=this.V=0;this.ea=-1;var d=
this;this.time=P(this,"Time");bc(this.time,function(e){cc(d,!1,e)});dc(d)}t(Tb,N);function dc(a){for(var b=a.b,c=0;c<b.length;c+=4){var d=a,e=b,g=c;e[g]=d.type<Yb?ec:" ";e[g+1]=d.c==d.j?null:d.c;e[g+2]=0;e[g+3]=fc}a.L=a.N=!0;cc(a,!0)}function gc(a){a.i?(a.a.fillStyle=a.i,a.a.fillRect(0,0,a.Z,a.u)):a.a.clearRect(0,0,a.Z,a.u)}
function cc(a,b,c){b=void 0===b?!1:b;c=void 0===c?0:c;if(a.L||b){if(a.type<Yb){var d=0;if(!a.S||b)gc(a);else if(a.w){d=a.g-a.w;var e=a.f*d;a.a.drawImage(a.o,a.f*a.w,0,e,a.u,0,0,e,a.u)}for(var g=e=0;g<a.K;g++){for(var f=0;f<a.g;f++){var k=a.b[e],h=a.b[e+1]||a.j,q=a.sa&&e==a.ea;if(a.b[e+3]&fc||q||b){if(f>=d)a:{var l=a,v=k;k=h;var n=f;h=g;var r=q;n=void 0===n?0:n;h=void 0===h?0:h;r=void 0===r?!1:r;var w=0;if(l.ia&&!(h&1)&&(w=l.f>>1,n==l.g-1))break a;if(k&&k!=l.c){r=r?$b(k,1,2):k;var u=$b(k,1,.25)}else r=
r?l.ka:l.c,u=l.ma;k=!1;v=v?r:u;r==l.j&&(v=l.i,k=!0);r=n*l.f+w;u=h*l.l;l.S&&(n=n*l.f+w,h*=l.l,l.i?(l.a.fillStyle=l.i,l.a.fillRect(n,h,l.f,l.l)):l.a.clearRect(n,h,l.f,l.l));l.a.fillStyle=v;h=hc[l.type];3==h.length?(l.a.beginPath(),l.a.arc(r+h[0],u+h[1],h[2],0,2*Math.PI),k?(l.a.globalCompositeOperation="destination-out",l.a.fill(),l.a.globalCompositeOperation="source-over"):l.a.fill()):l.a.fillRect(r+h[0],u+h[1],h[2],h[3])}a.b[e+3]=q?a.b[e+3]|fc:a.b[e+3]&~fc}e+=4}e+=a.Pa}a.w=0}else{b="";for(d=0;d<a.b.length;d+=
4)b+=a.b[d]||" ",a.b[d+3]&ic&&(b+=".");gc(a);for(g=e=d=0;d<b.length;d++){h=b[d];"."==h&&e&&e--;f=a;q=e;l=g;q=void 0===q?0:q;l=void 0===l?0:l;if(h=jc[h])for(k=0;k<h.length;k++)if(n=f,w=kc[h[k]]){v=(void 0===q?0:q)*n.f;r=(void 0===l?0:l)*n.l;n.a.fillStyle=n.c;n.a.beginPath();if(3==w.length)n.a.arc(v+w[0],r+w[1],w[2],0,2*Math.PI);else for(u=0;u<w.length;u+=2)u?n.a.lineTo(v+w[u],r+w[u+1]):n.a.moveTo(v+w[u],r+w[u+1]);n.a.closePath();n.a.fill()}if(++e==a.g&&(e=0,++g==a.K))break}}a.ba.globalCompositeOperation=
a.i&&a.c!=a.j?"source-over":"copy";a.ba.drawImage(a.o,0,0,a.Z,a.u,0,0,a.$,a.U);a.L=!1;a.ea=-1}else a.S||a.N||(!c||!a.V||c-a.V>=(1E3/60|0))&&dc(a);a.N=!1;c&&(a.V=c)}function ac(a){return(a=a||void 0)&&kb[a]||a}
function $b(a,b,c){b=void 0===b?1:b;c=void 0===c?1:c;if(a){var d=[];a=kb[a]||a;var e=16;var g=a.match(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i);g||(e=10,g=a.match(/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,?\s*(\d+|)\)$/i));if(g){var f;for(f=1;f<g.length;f++)d[f-1]=Number.parseInt(g[f],e);d.length=f-1;e=!0}else e=!1;if(e){a="rgba(";for(e=0;3>e;e++)g=Math.round(d[e]*c),g=0>g?0:255<g?255:g,a+=g+",";a+=(e<d.length?d[e]:b)+")"}}return a}
Tb.prototype.pa=function(a){var b=a.shift(),c=a.shift();a=a.shift();if(b==this.c&&c==this.i&&a&&a.length==this.b.length){this.b=a;for(b=0;b<=this.b.length-4;b+=4)this.b[b+1]==this.j&&(this.b[b+1]=null);cc(this,!0);return!0}return!1};Tb.prototype.qa=function(a){this.b&&(a.push(this.c),a.push(this.i),a.push(this.b))};
var Xb=0,Vb=1,Yb=3,Wb={small:Xb,round:Vb,square:2,digit:Yb},Ub="container",ec=0,ic=1,fc=128,lc={},hc=(lc[Xb]=[4,4,4],lc[Vb]=[16,16,14],lc[2]=[2,2,28,28],lc),Zb=[[8,8],[32,32],[32,32],[96,128]],kc={A:[30,8,79,8,67,19,37,19],B:[83,10,77,52,67,46,70,22],C:[77,59,71,100,61,89,64,64],D:[28,91,58,91,69,104,15,104],E:[18,59,28,64,25,88,12,100],F:[24,10,34,21,31,47,18,52],G:[24,56,34,50,60,50,71,56,61,61,33,61],P:[80,102,8]},jc={" ":[],0:"ABCDEF".split(""),1:["B","C"],2:["A","B","D","E","G"],3:["A","B","C",
"D","G"],4:["B","C","F","G"],5:["A","C","D","F","G"],6:"ACDEFG".split(""),7:["A","B","C"],8:"ABCDEFG".split(""),9:"ABCDFG".split(""),A:"ABCEFG".split(""),B:["C","D","E","F","G"],C:["A","D","E","F"],D:["B","C","D","E","G"],E:["A","D","E","F","G"],F:["A","E","F","G"],"-":["G"],".":["P"]};C.LED=Tb;
function S(a,b,c){N.call(this,a,b,c);var d=this;this.Z=this.h.touchType;this.U=this.h.diagnostics;this.l=this.h.monitorWidth||640;this.i=this.h.monitorHeight||480;this.c=this.O[T.Ma];if(!this.c)throw Error("unable to find binding: "+T.Ma);this.a=this.na(T.vc)||this.c;b=this.O[T.$b];if(!b){b=document.createElement("canvas");if(a=Na(this,T.$b))this.O[a]=b,b.setAttribute("id",a);b.setAttribute("class","pcjs-surface");b.setAttribute("width",this.h.monitorWidth);b.setAttribute("height",this.h.monitorHeight);
b.style.backgroundColor=this.h.monitorColor||"black";this.c.appendChild(b)}this.f=b;this.j=a=b.getContext("2d");Va("MSIE")&&(this.c.onresize=function(f,k,h,q){return function(){k.style.height=(f.clientWidth*q/h|0)+"px"}}(this.c,b,this.h.monitorWidth,this.h.monitorHeight),this.c.onresize());(c=+(this.h.aspect||Sa().aspect))&&.3<=c&&3.33>=c&&(Ya(function(f,k,h){return function(){k.style.height=(f.clientWidth/h|0)+"px"}}(this.c,b,c)),window.onresize());this.u=this.o=this.s.Ja=!1;if(c=this.O[T.Hb])if(b=
La(this.a,"requestFullscreen")){this.a.Ta=this.a[b];this.u=!0;this.o=document.fullscreenEnabled||Va("Edge/");if(b=La(document,"on","fullscreenchange")){var e=La(document,"fullscreenElement");document.addEventListener(b,function(){mc(d,null!=document[e])},!1)}(b=La(document,"on","fullscreenerror"))&&document.addEventListener(b,function(){mc(d)},!1)}else this.v("Full-screen API not available\n"),c.parentNode.removeChild(c);if(this.Z||this.U||this.u&&!Va("iOS")){var g=document.createElement("textarea");
if(b=Na(this,T.Xc))this.O[b]=g,g.setAttribute("id",b);g.setAttribute("class","pcjs-overlay");Va("iOS")&&(Ha(g),g.style.fontSize="16px");this.c.appendChild(g)}(this.g=P(this,"Input",!1))&&yb(this.g,g||this.c,this.na(this.h.focusBinding,!0));Sa();if(this.b=this.h.monitorRotate)this.b=this.b%360,0<this.b&&(this.b-=360),-90!=this.b?(this.v("unsupported monitor rotation: %d\n",this.b),this.b=0):(a.translate(0,this.i),a.rotate(this.b*Math.PI/180),a.scale(this.i/this.l,this.l/this.i))}t(S,N);
S.prototype.ua=function(a,b){var c=this;switch(a){case T.Hb:b.onclick=function(){c.s.Ja=1>=window.outerHeight-window.innerHeight;c.s.Ja||c.Ta()}}N.prototype.ua.call(this,a,b)};function nc(a){a.j&&(a.j.fillStyle="black",a.j.fillRect(0,0,a.f.width,a.f.height))}
S.prototype.Ta=function(){var a=!1;if(this.a&&this.a.Ta){a="100%";if(screen&&screen.width&&screen.height){var b=screen.width/screen.height,c=this.l/this.i;b>c&&(a=Math.round(c/b*100)+"%")}this.o?(this.f.style.width=a,this.f.style.height="auto",this.f.style.display="block",this.f.style.margin="auto"):(this.a.style.width=a,this.a.style.height="auto");this.w=this.a.style.backgroundColor;this.a.style.backgroundColor="black";this.a.Ta();this.g&&(a=this.g,a.l=!0,Sb(a));a=!0}return a};
function mc(a,b){a.s.Ja=!0;b||(a.a&&(a.o?a.f.style.width=a.f.style.height="":a.a.style.width=a.a.style.height="",a.w&&(a.a.style.backgroundColor=a.w)),a.s.Ja=!1);a.g&&!b&&(a=a.g,a.l=!1,Sb(a))}S.prototype.da=function(a){a?this.V=!1:nc(this)};S.prototype.ha=function(){nc(this)};var T={vc:"container",$b:"surface",Ma:"monitor",Xc:"overlay",Hb:"fullScreen"};C.Monitor=S;
function oc(a,b,c){N.call(this,a,b,c);this.ma=I(this,"cyclesMinimum",1E5,void 0);this.Na=I(this,"cyclesMaximum",1E9,void 0);this.$=Qa(I(this,"cyclesPerSecond",1E6,void 0),this.ma,this.Na);this.U=1E3/60;this.Pa=I(this,"updatesPerSecond",2,void 0)||2;this.nd=1E3/this.Pa;this.xa=0;this.ud=I(this,"timeLock",!0);this.ka=this.H=0;this.ia=this.g=1;this.sa=this.j=this.$/1E4/100;this.ba=[];this.u=[];this.b=[];this.N=[];this.ra=this.a=this.S=this.o=!1;this.w=this.f=0;a=La(window,"requestAnimationFrame");if(!a){a=
"setTimeout";var d=this.U}this.Wb=window[a].bind(window,this.Od.bind(this),d);this.dd=window[La(window,"cancelAnimationFrame")||"clearTimeout"].bind(window);this.T=this.V=this.i=this.c=this.Z=0;pc(this)||qc(this,this.ia)}t(oc,N);function bc(a,b){a.ba.push(b)}m=oc.prototype;
m.ua=function(a,b){var c=this;switch(a){case rc:b.onclick=function(){sc(c)&&(c.a?tc(c):c.start())};break;case uc:b.onclick=function(){qc(c,c.g<<1);vc(c,wc(c.j))};break;case xc:b.onclick=function(){yc(c)};break;case zc:b.addEventListener("mousedown",function(){c.o=!0}),b.addEventListener("mouseup",function(){pc(c);c.o=!1}),b.addEventListener("mousemove",function(){c.o&&pc(c)}),b.addEventListener("change",function(){c.o=!0;pc(c);c.o=!1})}N.prototype.ua.call(this,a,b)};
function Db(a,b,c){var d=void 0===d?-1:d;var e=a.b.length+1;a.b.push({id:b,yd:c,Wa:d,ca:-1});0<=d&&Ib(a,e,d);return e}
function Bc(a,b,c,d){var e=0,g=a.j,f=1E6*g;b&&c&&(g=b/(10*c)/100,a.v(A.Qa,"calcSpeed(%d cycles, %5.3fms): %5.3fMhz\n",b,c,g),d>a.U&&(1<a.g&&(a.g>>=1,a.v(A.Ra,"warning: frame time (%5.3fms) exceeded maximum (%5.3fms), target multiplier now %d\n",d,a.U,a.g)),e=d));a.H=g;a.ka=g/a.sa;b=a.ka/a.g;a.Z=f/b/60+1E-8;a.v(A.Qa,"nCyclesDepositPerFrame(%5.3f) = nCyclesPerSecond(%d) / nDivisor(%5.3f) / nFramesPerSecond(%d)\n",a.Z,f,b,60);return e}
function Cc(a,b){a.V=a.i=b;if(!a.u.length)return a.i=0,a.V;for(var c=0;0<a.i;){if(c<a.u.length){var d=a.u[c++];b=d.Pd.call(d,b)||1}else c=b=0;a.i-=b}return a.V-a.i}function Dc(a,b){b=void 0===b?a.V-a.i:b;if(!a.a){if(a.c)for(var c=0;c<a.u.length;c++){var d=a.u[c];d.Qd.call(d)}a.c=b}a.c-=b;1>a.c&&(a.S=!0);a.T+=b;a.V=a.i=0;a.a||(a.T=0);return b}
function Ec(a,b){b=void 0===b?0:b;if(b){var c=b;a.c+=b}else for(c=a.c,1>c&&(c=a.c+=a.Z),0>c&&(a.v(A.Ra,"warning: cycle count dropped below zero: %f\n",c),c=a.c=0),c|=0,b=a.b.length;0<b;b--){var d=a.b[b-1];!(0>d.ca)&&c>d.ca&&(c=d.ca)}return c}function wc(a){1<=a?a=a.toFixed(2)+"Mhz":(a=Math.round(1E6*a),a=999>=a?a+"Hz":Math.ceil(a/1E3)+"Khz");return a}function Fc(a){a.v(A.Qa,"getSpeedCurrent(%5.3fhz)\n",1E6*a.H);return a.a&&a.H?wc(a.H):"Stopped"}
function sc(a){return a.ra?!0:(G(a,"not powered"),!1)}function Gc(a,b){if(1<=b)for(var c=a.b.length;0<c;c--){var d=a.b[c-1];0>d.ca||(d.ca-=b,0>=d.ca&&(d.ca=-1,d.yd(),0<=d.Wa&&Ib(a,c,d.Wa)))}}m.da=function(a){this.ra=a;void 0===this.X&&(this.X=P(this,"Debugger",!1))&&this.X.ib(this,"time","dump time state",this.Ld)};function yc(a,b){sc(a)&&(a.a?G(a,"already running"):a.f?tc(a):Hc(a,b))}
m.Od=function(a){a=void 0===a?Date.now():a;this.w=0;if(this.a){var b=Date.now();if(this.K){var c=b-this.L-this.U;c>this.U&&(this.l+=c,this.v(A.Ra,"warning: browser throttling detected, compensating by %5.3fms\n",c))}this.L=b;this.l||(this.l=b);this.ea=0;try{this.S=!1;do Gc(this,Dc(this,Cc(this,Ec(this))));while(this.a&&!this.S)}catch(d){G(this,d.message),tc(this)}this.K=Date.now();this.ea&&(this.l+=this.ea,this.L+=this.ea);this.L+=Bc(this,this.T,this.K-this.l,this.K-this.L);this.K-this.xa>=this.nd&&
this.update();for(b=0;b<this.ba.length;b++)this.ba[b](a);this.w=this.Wb()}};function qc(a,b){if(void 0!==b){if(1>b||!a.o&&0<a.H&&a.H<.9*a.j)b=a.ia;a.g=b;b=a.sa*a.g;a.j!=b&&(a.j=b,vc(a,wc(a.j)))}a.l=a.K=0;a.c=a.T=0;Bc(a);for(b=a.b.length;0<b;b--){var c=a.b[b-1];0<=c.Wa&&Ib(a,b,c.Wa,!0)}}function pc(a){var b=a.O[zc];return b?(qc(a,Math.floor((b.value-b.min)/(b.max-b.min)*(a.Na-a.ma)+a.ma)/a.$|0),!0):!1}
function Ib(a,b,c,d){0<b&&b<=a.b.length&&(b=a.b[b-1],d||0>b.ca)&&(c=Math.ceil(a.$*(a.ud?a.ia:a.ka)/1E3*(void 0===c?1E3:c)),a.a&&(c+=Dc(a)),b.ca=c)}m.start=function(){if(this.a||this.f)return!1;this.a=!0;this.l=this.K=0;this.update(!0);this.w=this.Wb();return!0};function Hc(a,b){b=void 0===b?1:b;a.a||(b&&!a.f&&(a.f=b),a.f&&(a.f--,Gc(a,Dc(a,Cc(a,Ec(a,1)))),a.update(!1),a.f&&setTimeout(function(){Hc(a,0)},0)))}
function tc(a){return a.a?(a.a=!1,Dc(a),a.w&&(a.dd(a.w),a.w=0),a.update(!0),!0):a.f?(a.f=0,a.update(!0),!0):!1}m.update=function(a){a&&G(this,this.a?"started with "+wc(this.j)+" target":"stopped");eb(this,rc,this.a?"Halt":"Run");eb(this,xc,this.f?"Stop":"Step");this.o||vc(this,Fc(this));for(var b=0;b<this.N.length;b++){var c=this.N[b];c.nc.call(c,void 0!=a)}this.xa=Date.now();this.S=!0};function vc(a,b){eb(a,Ic,b);eb(a,uc,b)}
m.Ld=function(){var a=this.m("nCyclesPerSecond: %f\n",this.$);a+=this.m("nUpdatesPerSecond: %f\n",this.Pa);a+=this.m("nTargetMultiplier: %f\n",this.g);return a+=this.m("nCyclesDepositPerFrame: %f\n",this.Z)};var rc="run",uc="setSpeed",Ic="speed",xc="step",zc="throttle";C.Time=oc;
function Jc(a,b,c){N.call(this,a,b,c);this.type="static"==this.h.type?Kc:Lc;this.W=this.h.addrWidth||16;this.g=Math.pow(2,this.W);this.l=this.g-1|0;this.b=this.h.blockSize||(16<this.W?4096:1024);this.b>this.g&&(this.b=this.g);this.o=this.g/this.b|0;this.c=Math.log2(this.b)|0;this.i=(1<<this.c)-1;this.f=this.h.dataWidth||8;this.a=Array(this.o);this.j=0;a=new U(a,b+"[NONE]",{size:this.b,bus:this.R});for(b=0;b<this.g;b+=this.b)Mc(this,b,this.b,V.NONE,a);Nc(this,this.type)}t(Jc,N);
function Mc(a,b,c,d,e){for(var g=b>>>a.c;0<c&&g<a.a.length;){var f=g*a.b,k=a.b-(b-f);k>c&&(k=c);var h=a.a[g];if(b!=f||k!=a.b||h&&h.type!=V.NONE)break;h=a.R+"["+D(a,b,16,a.W)+"]";b=e?e.size==a.b?e:new U(a.I,h,{type:d,va:b,size:k,bus:a.R}):new U(a.I,h,{type:d,va:b,size:k,bus:a.R});a.a[g]=b;b=f+a.b;c-=k;g++}}function Oc(a,b){for(var c=V.cd,d=0,e=0;e<a.a.length;e++){var g=a.a[e];g&&g.type&c&&(b(g),d++)}return d}m=Jc.prototype;m.da=function(){void 0===this.X&&(this.X=P(this,"Debugger",!1))};m.ha=function(){};
m.mb=function(a){return a&&this.pa(a)?!0:!1};m.Ha=function(a){this.qa(a)};m.pa=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Lc||c.type&V.Ca)&&c.pa){var d=a.shift();if(!c.pa(d))return!1}}return!0};m.qa=function(a){for(var b=0;b<this.a.length;b++){var c=this.a[b];if((this.type==Lc||c.type&V.Ca)&&c.qa){var d=[];c.qa(d);a.push(d)}}};m.nb=function(a){return this.a[a>>>this.c].nb(a&this.i)};m.tb=function(a,b){this.a[a>>>this.c].tb(a&this.i,b)};
m.za=function(a,b){this.a[a>>>this.c].la(a&this.i,b)};function Nc(a,b){var c=a.j;a.j+=b;c&&a.j||(a.la=a.za)}m.Ya=function(a,b){return this.a[a>>>this.c].Ya(b)?(Nc(this,1),!0):!1};m.qb=function(a,b){return this.a[a>>>this.c].qb(b)?(Nc(this,1),!0):!1};m.Za=function(a,b){return this.a[a>>>this.c].Za(b)?(Nc(this,-1),!0):!1};m.sb=function(a,b){return this.a[a>>>this.c].sb(b)?(Nc(this,-1),!0):!1};var Kc=0,Lc=1;C.Bus=Jc;
function U(a,b,c){N.call(this,a,b,c);this.va=this.h.addr;this.size=this.h.size;this.type=this.h.type||V.NONE;this.b=(a=this.h.bus)?mb(this,a):P(this,a="Bus");if(!this.b)throw Error(this.m("unable to find bus '%s'",a));this.K=this.b.f;this.i=this.H=!1;this.values=this.g=null;a=this.za;this.b.type==Kc&&(a=this.ub,8==this.K&&!1!==pb(this,"ArrayBuffer")&&(this.H=!0));switch(this.type){case V.NONE:this.la=this.oc;break;case V.Yb:this.la=this.oc;break;case V.Ca:this.la=a}this.j=this.c=0;this.f=this.u=this.l=
null;Pc(this,this.h.values);Qc(this)}t(U,N);function Pc(a,b){"string"==typeof b?(sb(a,!1),Ra(b,function(c,d,e,g){if(4==e)if(!g&&d){try{var f=JSON.parse(d);Pc(a,f.values)}catch(k){a.v("error (%s) parsing resource: %s\n",k.message,c)}sb(a,!0)}else a.v("error (%d) loading resource: %s\n",g,c)})):a.h.values=b}
function Qc(a,b){if(a.type>V.NONE&&(a.H?(a.g=new ArrayBuffer(a.size),new DataView(a.g,0,a.size),a.values=new Uint8Array(a.g,0,a.size),new Uint16Array(a.g,0,a.size>>1),new Int32Array(a.g,0,a.size>>2)):a.values=Array(a.size).fill(0),b))for(var c=0;c<b.length;c++)a.values[c]=b[c]}m=U.prototype;
m.ha=function(){if(this.h.values)a:{var a=this.b,b=this.va,c=this.size,d=this.h.values,e=0,g=b&a.i;b>>>=a.c;c>d.length&&(c=d.length);for(;0<c&&b<a.a.length;){var f=a.a[b++];if(!f)break a;for(;0<c&&g<f.size;)f.za(g++,d[e++]),c--;g=0}}else this.type&V.Ca&&this.values&&this.values.fill(0)};m.nb=function(a){return this.values?this.values[a]:0};m.oc=function(){};m.tb=function(a,b){this.values&&(this.values[a]=b)};m.za=function(a,b){this.values[a]=b};
m.ub=function(a,b){this.values[a]=b;this.i=!0;this.c?this.f=this.za:this.la=this.za};m.Ya=function(a){return this.j?this.u==a?(this.j++,!0):!1:(this.j++,this.u=a,!0)};m.qb=function(a){if(!this.c){var b=this;this.c++;this.l=a;this.f=this.la;this.la=function(c,d){b.l(b.va,c,d);b.f(c,d)};return!0}return this.l==a?(this.c++,!0):!1};m.Za=function(a){return this.j&&this.u==a?(--this.j||(this.u=null),!0):!1};m.sb=function(a){return this.c&&this.l==a?(--this.c||(this.la=this.f,this.f=this.l=null),!0):!1};
m.pa=function(a){var b=a.shift();if(this.R==b){this.i=a.shift();a.shift();if(a=a.shift()){var c=this.size;c=void 0===c?0:c;if(a.length!=c){b=0;c=c?Array(c):[];for(var d=0;d<a.length-1;)for(var e=a[d++],g=a[d++];e--;)c[b++]=g;a=c}Qc(this,a)}return!0}return!1};m.qa=function(a){a.push(this.R);a.push(this.i);a.push(!1);a.push(this.values?wa(this.values):this.values)};var V={NONE:1,Yb:2,Ca:4,cd:14,gf:12};C.Memory=U;
function Rc(a,b,c){c.type=V.NONE;U.call(this,a,b,c);Mc(this.b,this.h.addr,this.h.size,V.Ca);tb(this,this.ha.bind(this))}t(Rc,U);C.RAM=Rc;
function Sc(a,b,c){c.type=V.Yb;U.call(this,a,b,c);Mc(this.b,this.h.addr,this.h.size,this.h.type,this);tb(this,this.ha.bind(this));this.M=this.X=void 0;if(C.LED&&this.O[Tc]){var d=this;this.o=Math.pow(2,Math.ceil(Math.log2(this.values.length)/2));this.w=this.values.length/this.o|0;this.a=new Tb(a,b+"LEDs",{"class":"LED",bindings:{container:Na(this,Tc)},type:Vb,cols:this.o,rows:this.w,color:I(this,"colorROM","green"),backgroundColor:I(this,"backgroundColorROM","black"),persistent:!0}),dc(this.a);this.L=
new wb(a,b+"Input",{"class":"Input",location:[0,0,this.a.$,this.a.U,this.o,this.w],bindings:{surface:Na(this,Tc)}});this.N=Oa(this)||"";zb(this.L,function(e,g){if(d.M){var f=d.N;0<=e&&0<=g&&(e=g*d.o+e,f=d.M.zf(d.va+e,d.values[e]));eb(d,Pa,f)}})}}t(Sc,U);
Sc.prototype.pa=function(a){var b=!0,c=a.shift();if(c&&this.a){var d=c.length;this.a.b.length==d?(this.a.b=c,cc(this.a,!0)):(this.v("inconsistent saved LED state (%d), unable to load\n",d),b=!1)}a.length&&(d=(a=a.shift())&&a.length||-1,this.values.length==d?this.values=a:(this.v("inconsistent saved ROM state (%d), unable to load\n",d),b=!1));return b};Sc.prototype.da=function(){void 0===this.M&&(this.M=P(this,"CPU"));void 0===this.X&&(this.X=P(this,"Debugger",!1))&&this.X.jb&&this.X.jb(this.h.symbols)};
Sc.prototype.qa=function(a){this.a&&(a.push(this.a.b),a.push(this.values))};var Tc="array",Pa="cellDesc";C.ROM=Sc;function Uc(a,b,c){c["class"]="CPU";N.call(this,a,b,c);this.X=void 0;this.c=this.ob=0;this.time=P(this,"Time");this.time.u.push(this);this.time.N.push(this);this.b=this.a=0}t(Uc,N);Uc.prototype.abort=function(a){this.c=this.ob;G(this,a.message);tc(this.time)};function Vc(a,b){a.X=b;return a.La}Uc.prototype.Pd=function(a){this.b=this.a=void 0===a?0:a;return this.b-this.a};
Uc.prototype.Qd=function(){this.b-=this.a;this.a=0};
function Wc(a,b,c){c["class"]="Debugger";N.call(this,a,b,c);var d=this;this.Y=this.h.defaultRadix||16;this.U=["(",")"];xa(this,"a",function(g,f,k,h,q){return D(d,q.J,d.Y,k)});xa(this,"n",function(g,f,k,h,q){return D(d,q,d.Y,k,0>f.indexOf("#")?"":void 0)});this.u=0;this.ea=A.NONE;this.H={};this.ia=[];this.ka=[];this.M=P(this,"CPU");this.La=Vc(this.M,this);this.ma=P(this,"Input",!1);if(a=this.M.h.busMemory||this.h.busMemory){this.a=mb(this,a);if(a=this.M.h.busIO||this.h.busIO)this.f=mb(this,a,!1);this.f||
(this.f=this.a)}else this.a=this.f=P(this,"Bus");this.w=this.a.W;this.xa=Math.pow(2,this.w)-1|0;this.l=this.$=0;this.j=[];for(var e in W)this.j[W[e]]=[];this.i=[];this.i[W.fa]=this.a;this.i[W.Ea]=this.a;this.i[W.ja]=this.f;this.i[W.Ba]=this.f;this.g=[];this.g[W.fa]=this.Bd.bind(this);this.g[W.Ea]=this.Cd.bind(this);this.g[W.ja]=this.zd.bind(this);this.g[W.Ba]=this.Ad.bind(this);this.c=[];this.K=void 0;this.S=null;this.V=0;this.time=P(this,"Time");this.time.N.push(this);this.T=0;this.o=[];this.N="";
this.ib(this,"state","dump machine state",this.Kd);this.Z=Xc();this.ra=Xc();this.ba=!1;this.L=0;this.b=[];Ja(this,this.Md.bind(this));(e=pb(this,"commands"))&&Xa(this,e)}t(Wc,N);m=Wc.prototype;m.ib=function(a,b,c,d){this.o.push({Jd:a,name:b,Id:c,Ua:d})};function Yc(a,b,c){for(var d,e=0;e<a.o.length;e++){var g=a.o[e];if(g.name==b){d=g.Ua.call(g.Jd,c);break}}return d}
m.jb=function(a){if(a&&a.length)for(var b=0;b<a.length-2;b+=3){var c=Zc(this,a[b]);if(c){var d=$c[a[b+1]];if(d){c={wa:c,type:d,name:a[b+2]};d=this.ia;var e=c,g=ad(d,e,this.hc);0>g&&d.splice(-(g+1),0,e);d=this.ka;e=ad(d,c,this.ic);0>e&&d.splice(-(e+1),0,c)}}}};function ad(a,b,c){var d=0,e=a.length,g=0;for(void 0===c&&(c=function(h,q){return h>q?1:h<q?-1:0});d<e;){var f=d+e>>1,k=void 0;k=c(b,a[f]);0<k?d=f+1:(e=f,g=!k)}return g?d:~d}m.hc=function(a,b){return a.name>b.name?1:a.name<b.name?-1:0};
m.ic=function(a,b){return a.wa.J>b.wa.J?1:a.wa.J<b.wa.J?-1:0};function bd(a,b,c){b=ad(a.ka,{wa:b,type:0,name:void 0},a.ic);if(0<=b&&(a=a.ka[b],!c||a.type==c))var d=a.name;return d}function cd(a,b,c,d){d=void 0===d?a.a:d;b.J=b.J+c&d.l}function Xc(a){a=void 0===a?0:a;var b=dd.Zc;return"number"==typeof a?{J:a,pb:-1,type:b}:{J:a.J,pb:a.pb,type:a.type}}
function Zc(a,b,c){if(b){var d=Xc();var e=0,g=b.charAt(e);switch(g){case "&":e++;break;case "#":e++;d.type=dd.ad;break;case "%":e++,g=b.charAt(e),"%"==g?e++:d.type=dd.dc}g=b.indexOf(":",e);if(0<=g){var f=ed(a,b.substring(e,g),c);void 0==f?d=null:(d.pb=f,e=g+1)}d&&(b=ed(a,b.substring(e),c),void 0==b?d=null:d.J=b&a.xa)}return d}function fd(a,b,c,d){d=void 0===d?a.a:d;a.l++;var e=d.nb(b.J);c&&cd(a,b,c,d);a.l--;return e}
function gd(a,b,c){if(32>=a.w)return b&c;b=X(a,b,0,!0);c=X(a,c,0,!0);return((b/E|0)&(c/E|0))*E+((b&c)>>>0)}function hd(a,b,c){if(32>=a.w)return b^c;b=X(a,b,0,!0);c=X(a,c,0,!0);return((b/E|0)^(c/E|0))*E+((b^c)>>>0)}
function id(a,b,c,d){for(d=void 0===d?-1:d;d--&&c.length;){var e=c.pop();if(2>b.length)return!1;var g=b.pop();var f=b.pop();switch(e){case "*":f*=g;break;case "/":if(!g)return!1;f=Math.trunc(f/g);break;case "^/":if(!g)return!1;f%=g;break;case "+":f+=g;break;case "-":f-=g;break;case "<<":f<<=g;break;case ">>":f>>=g;break;case ">>>":f>>>=g;break;case "<":f=f<g?1:0;break;case "<=":f=f<=g?1:0;break;case ">":f=f>g?1:0;break;case ">=":f=f>=g?1:0;break;case "==":f=f==g?1:0;break;case "!=":f=f!=g?1:0;break;
case "&":f=gd(a,f,g);break;case "!":case "|":e=f;32>=a.w?f=e|g:(e=X(a,e,0,!0),g=X(a,g,0,!0),f=(e/E|0|g/E|0)*E+((e|g)>>>0));break;case "^!":f=hd(a,f,g);break;case "&&":f=f&&g?1:0;break;case "||":f=f||g?1:0;break;case ",,":f=X(a,f,18,!0)*Math.pow(2,18)+X(a,g,18,!0);break;case "_":case "^_":"^_"==e&&(g=35-(g&255));g&&(f=X(a,f,0,!0),f=0<g?f*Math.pow(2,g):Math.trunc(f/Math.pow(2,-g)));break;default:return!1}b.push(X(a,f))}return!0}
function jd(a,b,c,d,e,g){var f,k=!1,h=0,q=[],l=[],v=a.Y;for(a.Y=e;c<d;){var n=b[c++].trim();var r=c<d?b[c++]:"";if(n){var w=void 0;var u=a;var z=n,B=g;h=void 0===h?0:h;if(void 0!=z){w=qb(u,z.toUpperCase());if(void 0==w){w=void 0;var y=u,Ac=ad(y.ia,{wa:null,type:0,name:z},y.hc);0<=Ac&&(w=y.ia[Ac].wa.J);if(void 0==w)if(w=z,u.H[w]?w=u.H[w].value:(w=w.substr(0,6),w=u.H[w]&&u.H[w].value),void 0==w)w=ua(z,1<z.length||10<u.Y?u.Y:10);else if(z=u.H[z]&&u.H[z].yf)B?B.push(z):(B=ed(u,z,B),void 0!==B?w+=B:w=
void 0)}void 0!=w&&(w=X(u,kd(u,w,h)))}u=w}else if("{"==r){n=1;for(u=c;c<d;)if(c++,r=c<b.length?b[c++]:"","{"==r)n++;else if("}"==r&&!--n)break;u=jd(a,b,u,c-1,a.Y,g);null!=u&&h&&(u=kd(a,u,h));n=c<d?b[c++].trim():"";r=c<d?b[c++]:""}else{if(" "==r)continue;if("^B"==r){a.Y=2;continue}if("^O"==r){a.Y=8;continue}if("^D"==r){a.Y=10;continue}if(!(h&-1073741824)){if("+"==r)continue;if("-"==r){h=h<<2|1;continue}if("~"==r||"^-"==r){h=h<<2|2;continue}if("^L"==r){h=h<<2|3;continue}}k=!0;break}if(void 0===u)if(g)g.push(n),
u=0;else{k=!0;break}q.push(X(a,u));if(" "==r)if(c<b.length-1&&!b[c])c++,r=b[c++];else{k=!0;break}if(!r)break;u="<"==a.U[0]?ld:md;if(!u[r]){k=!0;break}l.length&&u[r]<=u[l[l.length-1]]&&id(a,q,l,1);l.push(r);a.Y="^_"==r?10:e;h=0}if(k||!id(a,q,l)||1!=q.length)k=!0;k?g||a.v("parse error (%s)\n",n||r):f=q.pop();a.Y=v;return f}
function nd(a,b,c,d){for(var e,g=a.w/d|0;0<=(e=b.indexOf(c));){for(var f=0,k=e+1,h=g;k<b.length;){var q=b[k++];if(q==c){h=-1;break}if(!h)break;h--;q=q.charCodeAt(0);6==d&&(q-=32);q&=(1<<d)-1;f=X(a,f*Math.pow(2,d)+q,d*g,!0)}if(0<=h){a.v("parse error (%c%s%c)\n",c,b,c);return}b=b.substr(0,e)+D(a,f)+b.substr(k)}return b}
function ed(a,b,c){if(b){"{"!=a.U[0]&&(b=b.split(a.U[0]).join("{").split(a.U[1]).join("}"));b=nd(a,b,'"',8);if(!b)return d;b=nd(a,b,"'",6);if(!b)return d;16!=a.Y&&(b=b.replace(/(^|[^A-Z0-9$%.])([0-9]+)B/,"$1$2^_").replace(/\s+/g," "));b=b.split(/({|}|\|\||&&|\||\^!|\^B|\^O|\^D|\^L|\^-|~|\^_|_|&|!=|!|==|>=|>>>|>>|>|<=|<<|<|-|\+|\^\/|\/|\*|,,| )/);var d=jd(a,b,0,b.length,a.Y,c)}return d}
function kd(a,b,c){for(;c;){var d;switch(c&3){case 1:b=-X(a,b);break;case 2:b=hd(a,b,-1);break;case 3:for(d=35;0<=d&&!gd(a,b,Math.pow(2,d));)d--;b=35-d}c>>>=2}return b}function X(a,b,c,d){var e=b;c=c||a.w;if(d)if(32==c)e=b>>>0;else if(32>c)e=b&(1<<c)-1;else{if(a=Math.pow(2,c),0>b||b>=a)e=b%a,0>e&&(e+=a)}else 32>=c?e=b<<32-c>>32-c:(a=Math.pow(2,c-1),b>=a?(e=b%a,(b/a|0)&1&&(e-=a)):b<-a&&(e=b%a,((-b-1)/a|0)&1?e&&(e+=a):e||(e-=a)));b!=e&&(b=e);return b}
m.kb=function(a){function b(k){for(var h=0;h<k.length;h++)if(void 0!=k[h])return!1;return!0}if(-1>a)return od(this,this.kb);var c="";if(0<=a){var d=this.c[a];if(void 0!=d){c=d>>8;d&=255;var e=this.i[c];if(e){var g=this.j[c],f=g[d];(c&1?e.sb(f.J,this.g[c]):e.Za(f.J,this.g[c]))?(g[d]=void 0,this.c[a]=void 0,b(g)&&(g.length=0,b(this.c)&&(this.c.length=0)),c=this.m("%2d: %s %*a cleared\n",a,pd[c],e.W,f),--this.$||this.ba||(c+=qd(this,!1))):c=this.m("invalid break address: %*a\n",e.W,f)}else c="invalid bus"}else c=
this.m("invalid break index: %d\n",a)}else c="missing break index\n";return c};function rd(a,b){if(a.S&&(void 0==b||a.S.J==b)){var c=void 0===c?W.fa:c;b=-1;var d=sd(a.S,a.j[c]);if(0<=d)for(var e=0;e<a.c.length;e++){var g=a.c[e];if(void 0!=g&&c==g>>8&&d==(g&255)){b=e;break}}c=b;0<=c&&a.kb(c);a.S=null}}
m.lb=function(a,b){b=void 0===b?!1:b;if(-1>a)return od(this,this.lb,b);if(0<=a){var c=this.c[a];if(void 0!=c){var d=c>>8;c=this.j[d][c&255];if(void 0!=c){var e=b?"enabled":"disabled",g=this.i[d];!c.disabled==!b?(c.disabled=!b,a=this.m("%2d: %s %*a %s\n",a,pd[d],g.W,c,e)):a=this.m("%2d: %s %*a already %s\n",a,pd[d],g.W,c,e)}else a=this.m("no break address at index: %d\n",a)}else a=this.m("invalid break index: %d\n",a)}else a="missing break index\n";return a};
function od(a,b,c){for(var d="",e=0;e<a.c.length;e++)void 0!=a.c[e]&&(d+=b.call(a,e,c));d||(d="no break addresses found");return d}function td(a,b,c){c=void 0===c?W.fa:c;a=a.j[c];for(c=0;c<a.length;c++){var d=a[c];if(d.J==b)return d}}function sd(a,b){for(var c=0;c<b.length;c++)if(b[c].J==a.J)return c;return-1}
function ud(a,b){b=void 0===b?!1:b;for(var c="",d=0;d<a.c.length;d++){var e=a.c[d];if(void 0!=e){var g=e>>8;e=a.j[g][e&255];g=a.m("%s %*a",pd[g],a.i[g].W,e);b?(c&&(c+=";"),c+=g,e.disabled&&(c+=";bd "+d)):c+=a.m("%2d: %s %s\n",d,g,e.disabled?"disabled":"enabled")}}c||b||(c="no break addresses found\n");return c}
function vd(a,b,c){c=void 0===c?W.fa:c;if(b){var d=a.i[c];if(d){var e=a.j[c];var g=sd(b,e);if(0<=g)g=-(g+1);else{for(g=0;g<e.length&&void 0!=e[g];g++);e[g]=b}e=g;if(0<=e)if(g=c&1?d.qb(b.J,a.g[c]):d.Ya(b.J,a.g[c])){for(g=0;g<a.c.length&&void 0!=a.c[g];g++);a.c[g]=c<<8|e;b=a.m("%2d: %s %*a set\n",g,pd[c],d.W,b);a.$++||a.b.length||(b+=qd(a,!0))}else b=a.m("invalid break address: %*a\n",d.W,b),a.j[c][e]=void 0;else b=a.m("%s %*a already set\n",pd[c],d.W,b)}else b="invalid bus"}else b="missing break address\n";
return b}function wd(a,b){0<=b&&(a.u=b);var c="instruction break count: "+(0<a.u?a.u:"disabled")+"\n";0<b&&(a.b.length||(c+=qd(a,!0)),a.ba=!0);return c}function xd(a,b){var c;if(b){var d=Za(b);void 0!=d?a.ea=d?A.wb:A.NONE:c=a.m("unrecognized message option: %s\n",b)}c||(c=a.m("break on message: %b\n",!!a.ea));return c}m.zd=function(a,b){this.l||(void 0==a?Y(this,"break on unknown input %#0x: %#0x",b):(a=td(this,a+b,W.ja))&&!a.disabled&&Y(this,"break on input %*a: %#0x",this.f.W))};
m.Ad=function(a,b){this.l||(void 0==a?Y(this,"break on unknown output %#0x: %#0x",b):(a=td(this,a+b,W.Ba))&&!a.disabled&&Y(this,"break on output %*a: %#0x",this.f.W))};m.Bd=function(a,b){this.l||(void 0==a?Y(this,"break on unknown read %#0x: %#0x",b):(a+=b,this.b.length&&a==this.M.ob&&(this.V++,0<this.u&&(--this.u||Y(this,"break on instruction count")),this.b[this.L++]=a,this.L==this.b.length&&(this.L=0)),(b=td(this,a,W.fa))&&!b.disabled&&(Y(this,"break on read %*a: %#0x",this.a.W),rd(this,a))))};
m.Cd=function(a,b){this.l||(void 0==a?Y(this,"break on unknown write %#0x: %#0x",b):(a=td(this,a+b,W.Ea))&&!a.disabled&&Y(this,"break on write %*a: %#0x",this.a.W))};function Y(a,b,c){b=a.m.apply(a,[b].concat(p(c)));G(a,b);tc(a.time)}function yd(a,b,c){c=void 0===c?a.a:c;return D(a,b.J,a.Y,c.W,"")}
function zd(a,b,c){c=void 0===c?10:c;var d="";if(a.b.length){var e,g=[];c>a.b.length&&(c=a.b.length);0>b&&(b=c);var f=a.L-b;for(0>f&&(f+=a.b.length);0<=f&&f<a.b.length&&0<c;){var k=a.b[f++];if(void 0==k)break;f==a.b.length&&(f=0);e?e.J=k:e=Xc(k);for(k=0;1>k;k++)g[k]=fd(a,e,1);cd(a,e,-g.length);d+=a.rb(e,g,a.m("[%6d]",b--));c--}}return d||"no history"}
function Ad(a,b,c){var d=[],e="";for(b="number"==typeof b?Xc(b):b;c--;){for(cd(a,b,d.length);1>d.length;)d.push(fd(a,b,1));cd(a,b,-d.length);e+=a.rb(b,d)}return e}
function Bd(a,b,c,d,e,g){var f="";g=g?a.f:a.a;c||(c=g.f);var k=c>>3;d||(d=128);var h=0,q=d+15>>4||1,l=4==k?16:a.Y;"y"==e&&(l=k,q=d,h=8*k);b||(b=a.ra);for(;q--&&0<d;){var v=e=0,n,r="",w="",u=yd(a,b,g);for(n=l;0<n&&0<d;n--){var z=fd(a,b,1,g);e|=z<<(v++<<3);v==k&&(r+=D(a,e,0,c,""),r+=1==k?9==n?"-":" ":" ",h&&(w+=D(a,e,2,c,"")),e=v=0);h||(w+=32<=z&&127>z?String.fromCharCode(z):".");d--}f&&(f+="\n");f+=u+"  "+r+" "+w}a.ra=b;return f}
m.Kd=function(){var a=[];ob(this,function(b){b.Ha&&b.Ha(a);return!0});return JSON.stringify(a,null,2)};function Cd(a,b,c,d){var e=0,g="";d=d?a.f:a.a;for(var f=0;void 0!=b&&f<c.length;f++){var k=fd(a,b,0,d);if(void 0==k)break;var h=a,q=b,l=c[f],v=d;v=void 0===v?h.a:v;h.l++;v.tb(q.J,l);h.l--;g+=a.m("%*a: %#*n changed to %#*n\n",a.a.W,b,a.a.f,k,a.a.f,c[f]);cd(a,b,1,d);e++}e||(g+=a.m("%d locations updated\n",e));a.time.update();return g}
function qd(a,b){var c="";void 0!=b&&b==!a.b.length&&Oc(a.a,function(d){b?a.a.Ya(d.va,a.g[W.fa]):a.a.Za(d.va,a.g[W.fa])})&&(b?(a.L=0,a.b=Array(Dd)):a.b=[]);return c+=a.m("instruction history %s\n",a.b.length?"enabled":"disabled")}m.pa=function(a){var b=a.shift();return this.R==b?(Xa(this,a.shift()),this.s.aa=a.shift(),!0):!1};m.mc=function(a){va(this.ea,a)?Y(this,"break on message"):this.time.S=!0};
m.Md=function(a){var b=a[1],c=a[2],d=[],e=[],g=!1,f="";this.K=void 0;if("*"==c)var k=-2;else{k=ua(c);void 0==k&&(k=-1);var h=Zc(this,c,e);if(null===h)return}var q=0;a[3]&&(q=ua(a[3].substr("l"==a[3][0]?1:0))||8);for(var l=3;l<a.length;l++)d.push(ua(a[l],16));if("d"==b){l=Yc(this,c,d);if(void 0!=l)return l;b=this.N||b}if("s"!=b[0]&&e.length)return"unrecognized symbol(s): "+e;switch(b[0]){case "b":"c"==b[1]?f=this.kb(k):"d"==b[1]?f=this.lb(k):"e"==b[1]?f=this.lb(k,!0):"i"==b[1]?f=vd(this,h,W.ja):"l"==
b[1]?f=ud(this):"m"==b[1]?f=xd(this,c):"n"==b[1]?f=wd(this,k):"o"==b[1]?f=vd(this,h,W.Ba):"r"==b[1]?f=vd(this,h,W.fa):"w"==b[1]?f=vd(this,h,W.Ea):"?"==b[1]?(f="break commands:\n",Ed.forEach(function(v){f+=v+"\n"})):b[1]&&(f=void 0);break;case "d":this.N=b;if("b"!=b[1]&&b[1])if("w"==b[1])c=16;else if("d"==b[1])c=32;else if("i"==b[1]){if(!this.f){f="invalid bus";break}c=this.f.f;q=q||1;g=!0}else{if("h"==b[1])this.N="",f=zd(this,k,q);else if("?"==b[1]){if(this.N="",f="dump commands:\n",Fd.forEach(function(v){f+=
v+"\n"}),this.o.length)for(f+="dump extensions:\n",b=0;b<this.o.length;b++)h=this.o[b],f+=this.m("d   %-12s%s\n",h.name,h.Id)}else this.N="",f=void 0;break}else c=8;f=Bd(this,h,c,q,b[2],g);break;case "e":if("o"==b[1]){if(!this.f){f="invalid bus";break}g=!0}else if(b[1]){f=void 0;break}f=Cd(this,h,d,g);break;case "g":if(this.time.start()){if(void 0!=h){rd(this);f=vd(this,h);if(2!=f.indexOf(":"))break;this.S=h;f=""}break}f="already started\n";break;case "h":tc(this.time)||(f="already stopped\n");break;
case "p":a.shift();a.shift();b=a.join(" ");f+=this.m("%s = %s\n",b,D(this,ed(this,b)));break;case "r":if(b=b.substr(1).toUpperCase()){if(void 0==qb(this.M,b)){f+=this.m("unrecognized register: %s\n",b);break}void 0!=h&&vb(this.M,b,h.J)}this.Z.J=this.M.c;f+=this.M.toString();break;case "s":h=Za(c);if("h"==b[1]){if(this.$||0<this.u)h=void 0;f=qd(this,h);void 0!=h&&(this.ba=h)}else"p"==b[1]?0<k?(qc(this.time,k),f="target speed:  "+wc(this.time.j)):f="current speed: "+Fc(this.time):"s"==b[1]&&this.sa?
(k=this.sa.indexOf(c),0<=k&&(this.style=this.sa[k]),f="style: "+this.style):"?"==b[1]?(f="set commands:\n",Gd.forEach(function(v){f+=v+"\n"})):f=void 0;break;case "t":q=ua(c,10)||1;this.K=!0;if(b[1]){if("r"!=b[1]){f=void 0;break}this.K=!1}yc(this.time,q);break;case "u":if(b[1]){f=void 0;break}q||(q=8);h||(h=this.Z);f+=Ad(this,h,q);this.Z=h;break;case "?":f="debugger commands:\n";Hd.forEach(function(v){f+=v+"\n"});break;default:f=void 0}void 0==f&&a[0]&&(f="unrecognized command '"+a[0]+"' (try '?')\n");
return f};m.mb=function(a){return a&&this.pa(a[0])?(a.shift(),!0):!1};m.Ha=function(a){var b=[];this.qa(b);a.push(b);this.T=0};m.nc=function(a){a&&(this.time.a?this.T&&this.ma&&Sb(this.ma):this.K?this.ta(Ad(this,this.M.c,1)):(this.V&&(G(this.M,this.V+" instructions executed"),this.V=0),this.M.ta(this.M.toString()),void 0==this.K&&this.T&&(a=this.na(Ga.Oa,!0))&&a.focus()),this.T++)};m.qa=function(a){a.push(this.R);a.push(ud(this,!0));a.push(this.s.aa)};
m.rb=function(a,b,c){var d=this;return this.m("%s %02x       unsupported       ; %s\n",yd(this,a),function(){var e=b.shift();cd(d,a,1);return e}(),c||"")};
var Hd="b?\t\tbreak commands;d?\t\tdump commands;e[o] [addr] ...\tedit memory/ports;g    [addr]\trun (to addr);h\t\thalt;p    [expr]\tparse expression;r?   [value]\tdisplay/set registers;s?\t\tset commands;t[r] [n]\tstep (n instructions);u    [addr] [n]\tunassemble (at addr)".split(";"),Ed="bc [n|*]\tclear break address;bd [n|*]\tdisable break address;be [n|*]\tenable break address;bl [n]\t\tlist break addresses;bi [addr]\tbreak on input;bo [addr]\tbreak on output;br [addr]\tbreak on read;bw [addr]\tbreak on write;bm [on|off]\tbreak on message;bn [count]\tbreak on instruction count".split(";"),Fd=
"db  [addr]\tdump bytes (8 bits);dw  [addr]\tdump words (16 bits);dd  [addr]\tdump dwords (32 bits);di  [addr]\tdump input ports;d*y [addr]\tdump values in binary;dh  [n] [l]\tdump instruction history buffer;ds\t\tdump machine state".split(";"),Gd=["sh [on|off]\tset instruction history","sp [n]\t\tset speed multiplier","ss\t\tset debugger style"],dd={dc:1,Zc:0,ad:2,ef:0},W={fa:0,Ea:1,ja:2,Ba:3},Id={},pd=(Id[W.fa]="br",Id[W.Ea]="bw",Id[W.ja]="bi",Id[W.Ba]="bo",Id),Z={BYTE:1,Yc:2,bd:4,Pb:5,Cb:6,wd:7},
$c={"=":Z.wd,1:Z.BYTE,2:Z.Yc,4:Z.bd,"@":Z.Pb,";":Z.Cb},Dd=1E5,md={"||":5,"&&":6,"!":7,"|":7,"^!":8,"&":9,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,_:19,"^_":19,"{":20,"}":20},ld={",,":1,"||":5,"&&":6,"!=":10,"==":10,">=":11,">":11,"<=":11,"<":11,">>>":12,">>":12,"<<":12,"-":13,"+":13,"^/":14,"/":14,"*":14,"!":15,"|":15,"^!":15,"&":15,_:19,"^_":19,"{":20,"}":20};function Jd(a,b,c){Uc.call(this,a,b,c)}t(Jd,Uc);C.CPUx86=Jd;
function Kd(a,b,c){Wc.call(this,a,b,c)}t(Kd,Wc);Kd.prototype.rb=function(a,b,c){var d=yd(this,a),e="",g=bd(this,a,Z.Pb),f=bd(this,a,Z.Cb);b=b.shift();e+=D(this,b,16,8,"");cd(this,a,1);a=this.m("%#02x",b);d=this.m("%s %-7s %-7s %s",d,e,a,"");c?f&&(c+=" "+f):f&&(c=f);c&&(d=this.m("%-32s; %s",d,c));g&&(d=g+":\n"+d);return d+"\n"};C.Dbgx86=Kd;
function Ld(a,b,c){S.call(this,a,b,c);this.S=this.h.bufferAddr;this.H=this.h.interruptRate;this.K=this.h.refreshRate||60;this.N=mb(this,this.h.bus);this.M=P(this,"CPU");this.time=P(this,"Time");this.L=Db(this.time,this.R,this.$.bind(this));this.time.N.push(this);Ib(this.time,this.L,1E3/Math.max(this.K,this.H))}t(Ld,S);Ld.prototype.nc=function(){};
Ld.prototype.$=function(a){if(!a){if(this.V&&this.T){a=this.N;var b=this.S,c=this.T,d=b>>>a.c;for(b=a.b-(b&a.i);0<c&&d<a.a.length;){var e=a.a[d];e.i&&(e.i=!1,e.b.type==Kc&&(e.c?e.f=e.ub:e.la=e.ub));c-=b;b=a.b;d++}}Ib(this.time,this.L,1E3/Math.max(this.K,this.H))}};C.PCx86Video=Ld;
function Md(a,b,c){N.call(this,a,a);var d=this;this.c=!1;this.j=c;this.b="";this.i=this.g=!1;sb(this,!1);this.aa=A.zc;b=b.trim();"{"==b[0]?Nd(this,b):(this.b=b,Ra(this.b,function(e,g,f,k){4==f&&(!k&&g?(Nd(d,g),Od(d)):d.v("error (%d) loading configuration: %s\n",k,e))}));window.addEventListener("load",function(){d.i=!0;Od(d)});window.addEventListener(Va("iOS")?"pagehide":Va("Opera")?"unload":"beforeunload",function(){Pd(d)});window.addEventListener("pageshow",function(){d.c||d.da(!0)})}t(Md,N);
Md.prototype.ua=function(a,b){var c=this;switch(a){case Qd:b.onclick=function(){c.da()};break;case Rd:b.onclick=function(){c.ha()}}N.prototype.ua.call(this,a,b)};
function Od(a){var b=!0;if(a.g&&a.i){for(var c in a.a){var d=void 0,e=a.a[c];try{d=e["class"],C[d]?"Machine"==d?(a.v("PCjs %s v%3.2f\n%s\n",e.name,3,"Copyright \u00a9 2012-2020 Jeff Parsons <Jeff@pcjs.org>"),a.b&&a.v("Configuration: %s\n",a.b)):new C[d](a.I,c,e):a.v('unrecognized %s device "%s"\n',d,c)}catch(f){e.optional||(a.v('error initializing %s device "%s": %s\n',d,c,f.message),b=!1),ub(a,c)}}if(a.f){var g=Wa(a);ob(a,function(f){return f.mb&&!f.mb(g)?(f.v('unable to restore state for device "%s"\n',
f.R),!1):!0})}sb(a,!0);tb(a,a.da.bind(a,b))||a.v("machine %s not ready to power, waiting for device(s)\n",a.I)}}
function Nd(a,b){try{a.a=JSON.parse(b);var c=a.a[a.I];if(!c){c=a.a[za(a.b)];if(!c)throw Error("configuration missing machine ID");a.a[a.I]=c}nb(a,c,["autoSave","autoStart"]);a.f=!1!==a.h.autoSave;a.l=!1!==a.h.autoStart;if(a.j){var d=eval("("+a.j+")"),e;for(e in d)a.h[e]=d[e]}a.g=!0}catch(g){c=g.message,(d=c.match(/position ([0-9]+)/))&&(c+=" ('"+b.substr(+d[1],40).replace(/\s+/g," ")+"...')"),G(a,"machine '"+a.I+"' initialization error: "+c)}}
Md.prototype.da=function(a){a=void 0===a?!this.c:a;if(rb(this)){var b=this;a&&G(this,"power on");ob(this,function(c){c.da&&c!=b&&("CPU"!=c.h["class"]||b.l||rb(b)?c.da(a):c.time.update(!0));return!0});(this.c=a)||G(this,"power off")}};Md.prototype.ha=function(){if(rb(this)){var a=this;ob(this,function(b){b.ha&&b!=a&&b.ha();return!0});G(this,"reset")}};function Pd(a){if(a.f){var b=[];ob(a,function(c){c.Ha&&c.Ha(b);return!0});db(a,b)}a.da(!1)}var Qd="power",Rd="reset";
window.PCx86v3=function(a,b,c){var d=new Md(a,b,c);window.command=function(e){return Xa(d,e)};return d};C.Machine=Md;})()

//# sourceMappingURL=pcx86v3.js.map
